(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{172:function(e,t,s){"use strict";s.r(t);var a=s(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("p",[e._v("原创文章，转载请注明出处，违者必追究其法律责任。")]),e._v(" "),s("p",[e._v("本文只是最初级的安装，不涉及任何安全策略和高级应用，后续会添加关于最后优化部分的详细配置以及生产级的日志配置。")]),e._v(" "),e._m(1),e._v(" "),s("p",[e._v("从"),s("a",{attrs:{href:"https://www.elastic.co/cn/downloads",target:"_blank",rel:"noopener noreferrer"}},[e._v("Elastic公司官网"),s("OutboundLink")],1),e._v("下载安装包，安装遇到问题以及配置详情参考官网文档,：")]),e._v(" "),e._m(2),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._m(6),e._v(" "),e._m(7),e._v(" "),e._m(8),e._v(" "),e._m(9),e._m(10),e._v(" "),e._m(11),e._v(" "),e._m(12),s("p",[e._v("另外启动遇到了几个错误，需要修改如下文件：")]),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),e._m(16),e._v(" "),e._m(17),e._v(" "),e._m(18),e._m(19),e._v(" "),e._m(20),e._v(" "),e._m(21),e._m(22),e._v(" "),e._m(23),e._m(24),e._v(" "),e._m(25),e._m(26),e._v(" "),s("p",[e._v("生产环境中 Kafka 集群中节点数量建议为（2N + 1 ）个，这边就以 3 个节点举例")]),e._v(" "),e._m(27),e._v(" "),e._m(28),e._m(29),e._v(" "),s("p",[e._v("修改 Zookeeper 配置，搭建 Zookeeper 集群，数量 ( 2N + 1 ) 个,复制下面的配置文件到另外2台服务器")]),e._v(" "),e._m(30),s("p",[e._v("Zookeeper data 目录下面添加 myid 文件，内容为代表 Zooekeeper 节点 id （1，2，3），并保证不重复")]),e._v(" "),e._m(31),e._m(32),e._v(" "),s("p",[e._v("分别启动 3 台 Zookeeper 节点，保证集群的高可用")]),e._v(" "),e._m(33),e._m(34),e._v(" "),s("p",[e._v("kafka 集群这边搭建为 3 台，可以逐个修改 Kafka 配置，需要注意其中 broker.id 分别 （1，2，3）")]),e._v(" "),e._m(35),e._m(36),e._v(" "),s("p",[e._v("分别启动 3 台 Kafka 节点，保证集群的高可用")]),e._v(" "),e._m(37),e._m(38),e._v(" "),e._m(39),e._v(" "),e._m(40),e._m(41),e._v(" "),e._m(42),e._m(43),e._v(" "),e._m(44),e._m(45),e._v(" "),e._m(46),e._v(" "),e._m(47),e._m(48),e._v(" "),e._m(49),e._v(" "),e._m(50),e._m(51),e._v(" "),s("p",[e._v("Windows  设置为服务启动")]),e._v(" "),s("p",[e._v("Linux         设置为服务启动")]),e._v(" "),e._m(52),e._v(" "),e._m(53)])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"玩转-efk-之小试牛刀"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#玩转-efk-之小试牛刀","aria-hidden":"true"}},[this._v("#")]),this._v(" 玩转 EFK 之小试牛刀")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 环境")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# 安装包准备\nelasticsearch-6.5.4.tar.gz                # Elasticsearch\nfilebeat-6.5.4-linux-x86_64.tar.gz        # Filebeat\nkibana-6.5.4-linux-x86_64.tar.gz          # Kibana\nlogstash-6.5.4.tar.gz                     # Logstash\n\njdk-8u191-linux-x64.tar.gz                # ES、Losstash、Kibana依赖\nkafka_2.11-2.0.0.tgz                      # kafka\nzookeeper-3.4.13.tar.gz                   # kafka依赖注册中心\n\n# 服务器列表\n192.168.0.188  CentOS7.5   4C    8G    \n192.168.0.189  CentOS7.5   4C    4G\n192.168.0.191  CentOS7.5   4C    4G\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"elasticsearch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch","aria-hidden":"true"}},[this._v("#")]),this._v(" Elasticsearch")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用户","aria-hidden":"true"}},[this._v("#")]),this._v(" 用户")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("groupadd es          # 添加用户组\nuseradd -g es es     # 添加用户到指定用户组\npasswd es            # 为指定用户设置密码\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"解压"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("tar zxvf elasticsearch-2.3.4.tar.gz -C /opt")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"授权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#授权","aria-hidden":"true"}},[this._v("#")]),this._v(" 授权")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# 把文件夹赋予给es用户\n[root@vm-centos75-0188 opt]# chown -R es:es /opt/elasticsearch-6.5.4\n[root@vm-centos75-0188 opt]# chown -R es:es /opt/data/es\n# 把文件夹设置所有用户可读写\n[root@vm-centos75-0188 opt]# chown -R 777 /opt/data\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("vim /opt/elasticsearch-6.5.4/config/elasticsearch.yml")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ======================== Elasticsearch Configuration =========================")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# NOTE: Elasticsearch comes with reasonable defaults for most settings.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#       Before you set out to tweak and tune the configuration, make sure you")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#       understand what are you trying to accomplish and the consequences.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# The primary way of configuring a node is via this file. This template lists")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# the most important settings you may want to configure for a production cluster.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Please consult the documentation for further information on configuration options:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# https://www.elastic.co/guide/en/elasticsearch/reference/index.html")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ---------------------------------- Cluster -----------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Use a descriptive name for your cluster:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("cluster.name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" cosmo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("efk\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ------------------------------------ Node ------------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Use a descriptive name for the node:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("node.name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" cosmo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("188")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Add custom attributes to the node:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("node.attr.rack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" r1\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ----------------------------------- Memory -----------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Lock the memory on startup:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#bootstrap.memory_lock: true")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Make sure that the heap size is set to about half the memory available")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# on the system and that the owner of the process is allowed to use this")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# limit.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Elasticsearch performs poorly when the system is swapping the memory.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ----------------------------------- Paths ------------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Path to directory where to store the data (separate multiple locations by comma):")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("path.data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" /opt/data/es/data\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Path to log files:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("path.logs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" /opt/data/es/logs\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ----------------------------------- Memory -----------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Lock the memory on startup:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#bootstrap.memory_lock: true")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Make sure that the heap size is set to about half the memory available")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# on the system and that the owner of the process is allowed to use this")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# limit.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Elasticsearch performs poorly when the system is swapping the memory.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ---------------------------------- Network -----------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Set the bind address to a specific IP (IPv4 or IPv6):")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("network.host")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 192.168.0.188\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Set a custom port for HTTP:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("http.port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("9200")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For more information, consult the network module documentation.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# --------------------------------- Discovery ----------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Pass an initial list of hosts to perform discovery when new node is started:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# The default list of hosts is ["127.0.0.1", "[::1]"]')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('#discovery.zen.ping.unicast.hosts: ["192.168.0.188", "192.168.0.189", "192.168.0.190"]')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('# Prevent the "split brain" by configuring the majority of nodes (total number of master-eligible nodes / 2 + 1):')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#discovery.zen.minimum_master_nodes:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For more information, consult the zen discovery module documentation.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ---------------------------------- Gateway -----------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Block initial recovery after a full cluster restart until N nodes are started:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#gateway.recover_after_nodes: 3")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# For more information, consult the gateway module documentation.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ---------------------------------- Various -----------------------------------")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Require explicit names when deleting indices:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("#action.destructive_requires_name: true")]),e._v("\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ERROR: max file descriptors [4096] for elasticsearch process likely too low, increase to at least [65536]")]),e._v("\nvi "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("security"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("limits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("conf \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 添加如下内容:")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" soft nofile 65536\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" hard nofile 131072\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" soft nproc 2048\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" hard nproc 4096\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ERROR:max number of threads [2048] for user [lish] likely too low, increase to at least [4096]")]),e._v("\nvi "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("security"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("limits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("90"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("nproc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("conf \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 修改如下内容：")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" soft nproc 1024\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 修改为")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" soft nproc 4096\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ERROR:max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]")]),e._v("\n\nvi "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("/")]),e._v("sysctl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("conf \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 添加下面配置：")]),e._v("\nvm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("max_map_count=655360\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 并执行命令：")]),e._v("\nsysctl "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("p\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行","aria-hidden":"true"}},[this._v("#")]),this._v(" 运行")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('# 安装Java环境（一般服务器自带openjdk需先卸载，openjdk和oracle jdk有何区别自行百度）\n[root@vm-centos75-0188 packages]# /opt/elasticsearch-6.5.4/bin/elasticsearch\nwhich: no java in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)\ncould not find java; set JAVA_HOME or ensure java is in PATH\n\n[root@vm-centos75-0188 packages]# java -version\n-bash: java: 未找到命令\n\n# 查看JDK版本\n[root@vm-centos75-0188 packages]# java -version\n-bash: java: 未找到命令\n\n# 查看包含java字符串的文件，其中删除类似下面这四个文件（不一定是四个）\n[root@vm-centos75-0188 packages]# rpm -qa | grep java\njava-1.7.0-openjdk-1.7.0.111-2.6.7.8.el7.x86_64\njava-1.8.0-openjdk-1.8.0.102-4.b14.el7.x86_64\njava-1.8.0-openjdk-headless-1.8.0.102-4.b14.el7.x86_64\njava-1.7.0-openjdk-headless-1.7.0.111-2.6.7.8.el7.x86_64\n\n# 包含noarch的文件不必删除，如下：\npython-javapackages-3.4.1-11.el7.noarch\ntzdata-java-2016g-2.el7.noarch\njavapackages-tools-3.4.1-11.el7.noarch\n\n# 查询出来带openjdk的全部使用下面的命令卸载\n[root@vm-centos75-0188 packages]# yum -y remove java java-x.x.x-gcj-compat-x.x.x.x-xxjpp.xxx\n[root@vm-centos75-0188 packages]# yum -y remove java java-x.x.x-openjdk-x.x.x.x-x.x.bxx.exx\n\n# 文件最后添加如下内容\n[root@vm-centos75-0188 opt]# vi /etc/profile\nexport JAVA_HOME=/opt/jdk1.8.0_191\nexport CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport PATH=$PATH:$JAVA_HOME/bin\n\n# 生效环境变量\n[root@vm-centos75-0188 opt]# source /etc/profile\n\n# 检查是否配置成功\n[root@vm-centos75-0188 opt]# java -version\njava version "1.8.0_191"\nJava(TM) SE Runtime Environment (build 1.8.0_191-b12)\nJava HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)\n\n# 切换到es用户然后运行下面的命令\n# 直接运行会打印log日志在控制台，关闭服务即刻关闭\n$ /opt/elasticsearch-6.5.4/bin/elasticsearch\n# 加-d参数后台启动\n$ /opt/elasticsearch-6.5.4/bin/elasticsearch -d\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#访问","aria-hidden":"true"}},[this._v("#")]),this._v(" 访问")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("http://192.168.0.188:9200/")]),this._v("返回如下内容表示安装成功")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"cosmo-node-188"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"cluster_name"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"cosmo-efk"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"cluster_uuid"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"UgyoS_kMQjKJCxsVUmh-Rw"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"version"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"number"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"6.5.4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"build_flavor"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"build_type"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"tar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"build_hash"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"d2ef93d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"build_date"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"2018-12-17T21:17:40.758843Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"build_snapshot"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"lucene_version"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"7.5.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"minimum_wire_compatibility_version"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"5.6.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"minimum_index_compatibility_version"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"5.0.0"')]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"tagline"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"You Know, for Search"')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"kibana"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kibana","aria-hidden":"true"}},[this._v("#")]),this._v(" Kibana")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"解压-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-powershell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-powershell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token namespace"}},[this._v("[root@vm-centos75-0189 opt]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# tar zxvf kibana-6.5.4-linux-x86_64.tar.gz -C /opt")]),this._v("\n"),t("span",{pre:!0,attrs:{class:"token namespace"}},[this._v("[root@vm-centos75-0189 opt]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# mv /opt/kibana-6.5.4-linux-x86_64 /opt/kibana")]),this._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"配置-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('[root@vm-centos75-0189 opt]# vi kibana/config/kibana.yml \n# Kibana is served by a back end server. This setting specifies the port to use.\nserver.port: 5601\n\n# Specifies the address to which the Kibana server will bind. IP addresses and host names are both valid values.\n# The default is \'localhost\', which usually means remote machines will not be able to connect.\n# To allow connections from remote users, set this parameter to a non-loopback address.\nserver.host: "192.168.0.189"\n\n# Enables you to specify a path to mount Kibana at if you are running behind a proxy.\n# Use the `server.rewriteBasePath` setting to tell Kibana if it should remove the basePath\n# from requests it receives, and to prevent a deprecation warning at startup.\n# This setting cannot end in a slash.\n#server.basePath: ""\n\n# Specifies whether Kibana should rewrite requests that are prefixed with\n# `server.basePath` or require that they are rewritten by your reverse proxy.\n# This setting was effectively always `false` before Kibana 6.3 and will\n# default to `true` starting in Kibana 7.0.\n#server.rewriteBasePath: false\n\n# The maximum payload size in bytes for incoming server requests.\n#server.maxPayloadBytes: 1048576\n\n# The Kibana server\'s name.  This is used for display purposes.\nserver.name: "cosmo-kibana-189"\n\n# The URL of the Elasticsearch instance to use for all your queries.\nelasticsearch.url: "http://192.168.0.188:9200"\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# 直接启动\n$ /opt/kibana/bin/kibana\n# 后台启动\n$ /opt/kibana/bin/kibana -d\n# 浏览器访问下面地址\nhttp://192.168.0.189:5601\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"kafka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#kafka","aria-hidden":"true"}},[this._v("#")]),this._v(" Kafka")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"解压-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("tar -zxvf kafka_2.11-1.0.0.tgz\nmv kafka_2.11-1.0.0 kafka\ntar -zxvf zookeeper-3.4.13.tar.gz -C /opt\nmv zookeeper-3.4.13 zookeeper\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"配置zookeeper-集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置zookeeper-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置Zookeeper 集群")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('$ cd /opt/zookeeper/conf && cp zoo_sample.cfg zoo.cfg && vi zoo.cfg\n$ cat zoo.cfg\n\n# The number of milliseconds of each tick\ntickTime=2000\n# The number of ticks that the initial \n# synchronization phase can take\ninitLimit=10\n# The number of ticks that can pass between \n# sending a request and getting an acknowledgement\nsyncLimit=5\n# the directory where the snapshot is stored.\n# do not use /tmp for storage, /tmp here is just \n# example sakes.\ndataDir=/opt/data/zookeeper/data\ndataLogDir=/opt/data/zookeeper/logs\n# the port at which the clients will connect\nclientPort=2181\n# the maximum number of client connections.\n# increase this if you need to handle more clients\nmaxClientCnxns=60\n#\n# Be sure to read the maintenance section of the \n# administrator guide before turning on autopurge.\n#\n# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance\n#\n# The number of snapshots to retain in dataDir\n#autopurge.snapRetainCount=3\n# Purge task interval in hours\n# Set to "0" to disable auto purge feature\n#autopurge.purgeInterval=1\nserver.1=192.168.0.188:2888:3888\nserver.2=192.168.0.189:2888:3888\nserver.3=192.168.0.191:2888:3888\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('$ echo "1" > /opt/data/zookeeper/data/myid         # 192.168.0.188\n$ echo "2" > /opt/data/zookeeper/data/myid         # 192.168.0.189\n$ echo "3" > /opt/data/zookeeper/data/myid         # 192.168.0.191\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"启动-zookeeper-集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-zookeeper-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动 Zookeeper 集群")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("$ ./zkServer.sh -start        # 启动\n$ ./zkServer.sh -stop         # 停止\n$ ./zkServer.sh -status       # 状态\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"配置-kafka-集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-kafka-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 Kafka 集群")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('$ vi /opt/kafka/config/server.properties\n# Licensed to the Apache Software Foundation (ASF) under one or more\n# contributor license agreements.  See the NOTICE file distributed with\n# this work for additional information regarding copyright ownership.\n# The ASF licenses this file to You under the Apache License, Version 2.0\n# (the "License"); you may not use this file except in compliance with\n# the License.  You may obtain a copy of the License at\n#\n#    http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an "AS IS" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n# see kafka.server.KafkaConfig for additional details and defaults\n\n############################# Server Basics #############################\n\n# The id of the broker. This must be set to a unique integer for each broker.\nbroker.id=188\n\n############################# Socket Server Settings #############################\n\n# The address the socket server listens on. It will get the value returned from \n# java.net.InetAddress.getCanonicalHostName() if not configured.\n#   FORMAT:\n#     listeners = listener_name://host_name:port\n#   EXAMPLE:\n#     listeners = PLAINTEXT://your.host.name:9092\nlisteners=PLAINTEXT://192.168.0.188:9092\n\n# Hostname and port the broker will advertise to producers and consumers. If not set, \n# it uses the value for "listeners" if configured.  Otherwise, it will use the value\n# returned from java.net.InetAddress.getCanonicalHostName().\nadvertised.listeners=PLAINTEXT://192.168.0.188:9092\n\n# Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details\n#listener.security.protocol.map=PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL\n\n# The number of threads that the server uses for receiving requests from the network and sending responses to the network\nnum.network.threads=8\n\n# The number of threads that the server uses for processing requests, which may include disk I/O\nnum.io.threads=8\n\n# The send buffer (SO_SNDBUF) used by the socket server\nsocket.send.buffer.bytes=102400\n\n# The receive buffer (SO_RCVBUF) used by the socket server\nsocket.receive.buffer.bytes=102400\n\n# The maximum size of a request that the socket server will accept (protection against OOM)\nsocket.request.max.bytes=104857600\n\n\n############################# Log Basics #############################\n\n# A comma separated list of directories under which to store log files\nlog.dirs=/opt/data/kafka/logs\n\n# The default number of log partitions per topic. More partitions allow greater\n# parallelism for consumption, but this will also result in more files across\n# the brokers.\nnum.partitions=3\n\n# The number of threads per data directory to be used for log recovery at startup and flushing at shutdown.\n# This value is recommended to be increased for installations with data dirs located in RAID array.\nnum.recovery.threads.per.data.dir=1\n\n############################# Internal Topic Settings  #############################\n# The replication factor for the group metadata internal topics "__consumer_offsets" and "__transaction_state"\n# For anything other than development testing, a value greater than 1 is recommended for to ensure availability such as 3.\noffsets.topic.replication.factor=1\ntransaction.state.log.replication.factor=1\ntransaction.state.log.min.isr=1\n\n############################# Log Flush Policy #############################\n\n# Messages are immediately written to the filesystem but by default we only fsync() to sync\n# the OS cache lazily. The following configurations control the flush of data to disk.\n# There are a few important trade-offs here:\n#    1. Durability: Unflushed data may be lost if you are not using replication.\n#    2. Latency: Very large flush intervals may lead to latency spikes when the flush does occur as there will be a lot of data to flush.\n#    3. Throughput: The flush is generally the most expensive operation, and a small flush interval may lead to excessive seeks.\n# The settings below allow one to configure the flush policy to flush data after a period of time or\n# every N messages (or both). This can be done globally and overridden on a per-topic basis.\n\n# The number of messages to accept before forcing a flush of data to disk\n#log.flush.interval.messages=10000\n\n# The maximum amount of time a message can sit in a log before we force a flush\n#log.flush.interval.ms=1000\n\n############################# Log Retention Policy #############################\n\n# The following configurations control the disposal of log segments. The policy can\n# be set to delete segments after a period of time, or after a given size has accumulated.\n# A segment will be deleted whenever *either* of these criteria are met. Deletion always happens\n# from the end of the log.\n\n# The minimum age of a log file to be eligible for deletion due to age\nlog.retention.hours=168\n\n# A size-based retention policy for logs. Segments are pruned from the log unless the remaining\n# segments drop below log.retention.bytes. Functions independently of log.retention.hours.\n#log.retention.bytes=1073741824\n\n# The maximum size of a log segment file. When this size is reached a new log segment will be created.\nlog.segment.bytes=1073741824\n\n# The interval at which log segments are checked to see if they can be deleted according\n# to the retention policies\nlog.retention.check.interval.ms=300000\n\n############################# Zookeeper #############################\n\n# Zookeeper connection string (see zookeeper docs for details).\n# This is a comma separated host:port pairs, each corresponding to a zk\n# server. e.g. "127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002".\n# You can also append an optional chroot string to the urls to specify the\n# root directory for all kafka znodes.\nzookeeper.connect=192.168.0.188:2181,192.168.0.189:2181,192.168.0.191:2181\n\n# Timeout in ms for connecting to zookeeper\nzookeeper.connection.timeout.ms=6000\n\n############################# Group Coordinator Settings #############################\n\n# The following configuration specifies the time, in milliseconds, that the GroupCoordinator will delay the initial consumer rebalance.\n# The rebalance will be further delayed by the value of group.initial.rebalance.delay.ms as new members join the group, up to a maximum of max.poll.interval.ms.\n# The default value for this is 3 seconds.\n# We override this to 0 here as it makes for a better out-of-the-box experience for development and testing.\n# However, in production environments the default value of 3 seconds is more suitable as this will help to avoid unnecessary, and potentially expensive, rebalances during application startup.\ngroup.initial.rebalance.delay.ms=0\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"启动-kafka-集群"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-kafka-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动 Kafka 集群")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# 启动\n$ /opt/kafka/bin/kafka-server-start.sh -daemon /opt/kafka/config/server.properties\n# 查看 topic 是否创建成功\n$ /opt/kafka/bin/kafka-topics.sh --list --zookeeper 192.168.0.188:2181\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"logstash"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#logstash","aria-hidden":"true"}},[this._v("#")]),this._v(" Logstash")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"解压-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压-4","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("[root@vm-centos75-0191 opt]# tar zxvf logstash-6.5.4.tar.gz -C /opt\n[root@vm-centos75-0191 opt]# mv /opt/logstash-6.5.4 /opt/logstash\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"配置-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('[root@vm-centos75-0191 config]# cd /opt/logstash/config\n[root@vm-centos75-0191 config]# cp logstash-sample.conf logstash.conf\n[root@vm-centos75-0191 config]# vi logstash.conf \n[root@vm-centos75-0191 config]# cat logstash.conf \ninput {\n  kafka {\n    bootstrap_servers => "192.168.0.188:9092"\n    topics => "idp-bpm"\n    #topics_pattern => "^idp\\\\-.*"\n  }\n}\n\noutput {\n  elasticsearch {\n    hosts => ["http://192.168.0.188:9200"]\n    index => "idp-%{+YYYY.MM.dd}"\n    #user => "elastic"\n    #password => "changeme"\n  }\n}\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"启动-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("# 直接启动\n[root@vm-centos75-0191 bin]# ./logstash -f ../config/logstash.conf\n# 后台启动\n[root@vm-centos75-0191 bin]# cd /opt/logstash/\n[root@vm-centos75-0191 logstash]# nohup bin/logstash -f config/logstash.conf --config.reload.automatic >& /opt/data/logstash/logs/logstash &\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"filebeat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#filebeat","aria-hidden":"true"}},[this._v("#")]),this._v(" FileBeat")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"解压-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压-5","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("[root@vm-centos75-0191 opt]# tar zxvf filebeat-6.5.4-linux-x86_64.tar.gz -C /opt\n[root@vm-centos75-0191 opt]# mv /opt/filebeat-6.5.4-linux-x86_64 /opt/filebeat\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"配置-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-4","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("vi /opt/filebeat/filebeat.yml")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('###################### Filebeat Configuration Example #########################\n\n# This file is an example configuration file highlighting only the most common\n# options. The filebeat.reference.yml file from the same directory contains all the\n# supported options with more comments. You can use it as a reference.\n#\n# You can find the full configuration reference here:\n# https://www.elastic.co/guide/en/beats/filebeat/index.html\n\n# For more available modules and options, please see the filebeat.reference.yml sample\n# configuration file.\n\n#=========================== Filebeat inputs =============================\n\nfilebeat.inputs:\n\n# Each - is an input. Most options can be set at the input level, so\n# you can use different inputs for various configurations.\n# Below are the input specific configurations.\n\n- type: log\n\n  # Change to true to enable this input configuration.\n  enabled: true\n\n  # Paths that should be crawled and fetched. Glob based paths.\n  paths:\n    #- /var/log/*.log\n    - E:\\idp\\logs\\bpm\\bpm.log\n\n  # Exclude lines. A list of regular expressions to match. It drops the lines that are\n  # matching any regular expression from the list.\n  #exclude_lines: [\'^DBG\']\n\n  # Include lines. A list of regular expressions to match. It exports the lines that are\n  # matching any regular expression from the list.\n  #include_lines: [\'^ERR\', \'^WARN\']\n\n  # Exclude files. A list of regular expressions to match. Filebeat drops the files that\n  # are matching any regular expression from the list. By default, no files are dropped.\n  #exclude_files: [\'.gz$\']\n\n  # Optional additional fields. These fields can be freely picked\n  # to add additional information to the crawled log files for filtering\n  #fields:\n  #  level: debug\n  #  review: 1\n\n  ### Multiline options\n\n  # Multiline can be used for log messages spanning multiple lines. This is common\n  # for Java Stack Traces or C-Line Continuation\n\n  # The regexp Pattern that has to be matched. The example pattern matches all lines starting with [\n  #multiline.pattern: ^\\[\n\n  # Defines if the pattern set under pattern should be negated or not. Default is false.\n  #multiline.negate: false\n\n  # Match can be set to "after" or "before". It is used to define if lines should be append to a pattern\n  # that was (not) matched before or after or as long as a pattern is not matched based on negate.\n  # Note: After is the equivalent to previous and before is the equivalent to to next in Logstash\n  #multiline.match: after\n\n\n#============================= Filebeat modules ===============================\n\nfilebeat.config.modules:\n  # Glob pattern for configuration loading\n  path: ${path.config}/modules.d/*.yml\n\n  # Set to true to enable config reloading\n  reload.enabled: false\n\n  # Period on which files under path should be checked for changes\n  #reload.period: 10s\n\n#==================== Elasticsearch template setting ==========================\n\nsetup.template.settings:\n  index.number_of_shards: 3\n  #index.codec: best_compression\n  #_source.enabled: false\n\n#================================ General =====================================\n\n# The name of the shipper that publishes the network data. It can be used to group\n# all the transactions sent by a single shipper in the web interface.\n#name:\n\n# The tags of the shipper are included in their own field with each\n# transaction published.\n#tags: ["service-X", "web-tier"]\n\n# Optional fields that you can specify to add additional information to the\n# output.\n#fields:\n#  env: staging\n\n\n#============================== Dashboards =====================================\n# These settings control loading the sample dashboards to the Kibana index. Loading\n# the dashboards is disabled by default and can be enabled either by setting the\n# options here, or by using the `-setup` CLI flag or the `setup` command.\n#setup.dashboards.enabled: false\n\n# The URL from where to download the dashboards archive. By default this URL\n# has a value which is computed based on the Beat name and version. For released\n# versions, this URL points to the dashboard archive on the artifacts.elastic.co\n# website.\n#setup.dashboards.url:\n\n#============================== Kibana =====================================\n\n# Starting with Beats version 6.0.0, the dashboards are loaded via the Kibana API.\n# This requires a Kibana endpoint configuration.\nsetup.kibana:\n\n  # Kibana Host\n  # Scheme and port can be left out and will be set to the default (http and 5601)\n  # In case you specify and additional path, the scheme is required: http://localhost:5601/path\n  # IPv6 addresses should always be defined as: https://[2001:db8::1]:5601\n  #host: "localhost:5601"\n\n  # Kibana Space ID\n  # ID of the Kibana Space into which the dashboards should be loaded. By default,\n  # the Default Space will be used.\n  #space.id:\n\n#============================= Elastic Cloud ==================================\n\n# These settings simplify using filebeat with the Elastic Cloud (https://cloud.elastic.co/).\n\n# The cloud.id setting overwrites the `output.elasticsearch.hosts` and\n# `setup.kibana.host` options.\n# You can find the `cloud.id` in the Elastic Cloud web UI.\n#cloud.id:\n\n# The cloud.auth setting overwrites the `output.elasticsearch.username` and\n# `output.elasticsearch.password` settings. The format is `<user>:<pass>`.\n#cloud.auth:\n\n#================================ Outputs =====================================\n\n# Configure what output to use when sending the data collected by the beat.\n\n\n#------------------------------ Kafka output ----------------------------------\noutput.kafka:   \n  hosts: ["192.168.0.188:9092"]\n  topic: idp-bpm\n  required_acks: 1\n\n#-------------------------- Elasticsearch output ------------------------------\n#output.elasticsearch:\n  # Array of hosts to connect to.\n  #hosts: ["localhost:9200"]\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n\n#----------------------------- Logstash output --------------------------------\n#output.logstash:\n  # The Logstash hosts\n  #hosts: ["localhost:5044"]\n\n  # Optional SSL. By default is off.\n  # List of root certificates for HTTPS server verifications\n  #ssl.certificate_authorities: ["/etc/pki/root/ca.pem"]\n\n  # Certificate for SSL client authentication\n  #ssl.certificate: "/etc/pki/client/cert.pem"\n\n  # Client Certificate Key\n  #ssl.key: "/etc/pki/client/cert.key"\n\n#================================ Procesors =====================================\n\n# Configure processors to enhance or manipulate events generated by the beat.\n\nprocessors:\n  - add_host_metadata: ~\n  - add_cloud_metadata: ~\n\n#================================ Logging =====================================\n\n# Sets log level. The default log level is info.\n# Available log levels are: error, warning, info, debug\n#logging.level: debug\n\n# At debug level, you can selectively enable logging only for some components.\n# To enable all selectors use ["*"]. Examples of other selectors are "beat",\n# "publish", "service".\n#logging.selectors: ["*"]\n\n#============================== Xpack Monitoring ===============================\n# filebeat can export internal metrics to a central Elasticsearch monitoring\n# cluster.  This requires xpack monitoring to be enabled in Elasticsearch.  The\n# reporting is disabled by default.\n\n# Set to true to enable the monitoring reporter.\n#xpack.monitoring.enabled: false\n\n# Uncomment to send the metrics to Elasticsearch. Most settings from the\n# Elasticsearch output are accepted here as well. Any setting that is not set is\n# automatically inherited from the Elasticsearch output configuration, so if you\n# have the Elasticsearch output configured, you can simply uncomment the\n# following line.\n#xpack.monitoring.elasticsearch:\n\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"启动-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优化","aria-hidden":"true"}},[this._v("#")]),this._v(" 优化")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("所有组件作为服务启动")]),e._v(" "),s("li",[e._v("所有组件集群一键启动、停止、查看状态")]),e._v(" "),s("li",[e._v("所有组件监控插件、第三方程序的研究")]),e._v(" "),s("li",[e._v("所有组件一键安装配置的研究")]),e._v(" "),s("li",[e._v("所有组件安全设置的研究")]),e._v(" "),s("li",[e._v("所有组件高级设置的研究")]),e._v(" "),s("li",[e._v("Logstash 输入、输出、过滤以及消费kafka topic正则表达式设置的研究")]),e._v(" "),s("li",[e._v("Kibana 图表、仪表、各项目指标归纳设置的研究")]),e._v(" "),s("li",[e._v("用户足迹、业务日志、系统日志分类等归纳设置的研究")])])}],!1,null,null,null);n.options.__file="README.md";t.default=n.exports}}]);