(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{217:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),s("p",[t._v("原创文章，转载请注明出处，违者必追究其法律责任。")]),t._v(" "),s("p",[t._v("本文只是最初级的安装，不涉及任何安全策略和高级应用，后续会添加关于最后优化部分的详细配置以及生产级的日志配置。")]),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("从"),s("a",{attrs:{href:"https://www.elastic.co/cn/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Elastic公司官网"),s("OutboundLink")],1),t._v("下载安装包，安装遇到问题以及配置详情参考官网文档,：")]),t._v(" "),t._m(2),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),s("p",[t._v("另外启动遇到了几个错误，需要修改如下文件：")]),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._m(24),t._v(" "),t._m(25),t._m(26),t._v(" "),s("p",[t._v("生产环境中 Kafka 集群中节点数量建议为（2N + 1 ）个，这边就以 3 个节点举例")]),t._v(" "),t._m(27),t._v(" "),t._m(28),t._m(29),t._v(" "),s("p",[t._v("修改 Zookeeper 配置，搭建 Zookeeper 集群，数量 ( 2N + 1 ) 个,复制下面的配置文件到另外2台服务器")]),t._v(" "),t._m(30),s("p",[t._v("Zookeeper data 目录下面添加 myid 文件，内容为代表 Zooekeeper 节点 id （1，2，3），并保证不重复")]),t._v(" "),t._m(31),t._m(32),t._v(" "),s("p",[t._v("分别启动 3 台 Zookeeper 节点，保证集群的高可用")]),t._v(" "),t._m(33),t._m(34),t._v(" "),s("p",[t._v("kafka 集群这边搭建为 3 台，可以逐个修改 Kafka 配置，需要注意其中 broker.id 分别 （1，2，3）")]),t._v(" "),t._m(35),t._m(36),t._v(" "),s("p",[t._v("分别启动 3 台 Kafka 节点，保证集群的高可用")]),t._v(" "),t._m(37),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._m(41),t._v(" "),t._m(42),t._m(43),t._v(" "),t._m(44),t._m(45),t._v(" "),t._m(46),t._v(" "),t._m(47),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._m(51),t._v(" "),s("p",[t._v("Windows  设置为服务启动")]),t._v(" "),s("p",[t._v("Linux         设置为服务启动")]),t._v(" "),t._m(52),t._v(" "),t._m(53)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"玩转-efk-之小试牛刀"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#玩转-efk-之小试牛刀","aria-hidden":"true"}},[this._v("#")]),this._v(" 玩转 EFK 之小试牛刀")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 环境")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装包准备")]),t._v("\nelasticsearch-6.5.4.tar.gz                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Elasticsearch")]),t._v("\nfilebeat-6.5.4-linux-x86_64.tar.gz        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Filebeat")]),t._v("\nkibana-6.5.4-linux-x86_64.tar.gz          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kibana")]),t._v("\nlogstash-6.5.4.tar.gz                     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Logstash")]),t._v("\n\njdk-8u191-linux-x64.tar.gz                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ES、Losstash、Kibana依赖")]),t._v("\nkafka_2.11-2.0.0.tgz                      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kafka")]),t._v("\nzookeeper-3.4.13.tar.gz                   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kafka依赖注册中心")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务器列表")]),t._v("\n192.168.0.188  CentOS7.5   4C    8G    \n192.168.0.189  CentOS7.5   4C    4G\n192.168.0.191  CentOS7.5   4C    4G\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"elasticsearch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch","aria-hidden":"true"}},[this._v("#")]),this._v(" Elasticsearch")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用户","aria-hidden":"true"}},[this._v("#")]),this._v(" 用户")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("groupadd")]),t._v(" es          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加用户组")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" -g es es     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加用户到指定用户组")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("passwd")]),t._v(" es            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 为指定用户设置密码")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"解压"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("tar zxvf elasticsearch-2.3.4.tar.gz -C /opt")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"授权"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#授权","aria-hidden":"true"}},[this._v("#")]),this._v(" 授权")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把文件夹赋予给es用户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chown -R es:es /opt/elasticsearch-6.5.4")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chown -R es:es /opt/data/es")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 把文件夹设置所有用户可读写")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chown -R 777 /opt/data")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("vim /opt/elasticsearch-6.5.4/config/elasticsearch.yml")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ======================== Elasticsearch Configuration =========================")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NOTE: Elasticsearch comes with reasonable defaults for most settings.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#       Before you set out to tweak and tune the configuration, make sure you")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#       understand what are you trying to accomplish and the consequences.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The primary way of configuring a node is via this file. This template lists")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the most important settings you may want to configure for a production cluster.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Please consult the documentation for further information on configuration options:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://www.elastic.co/guide/en/elasticsearch/reference/index.html")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------- Cluster -----------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Use a descriptive name for your cluster:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cluster.name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cosmo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("efk\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ------------------------------------ Node ------------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Use a descriptive name for the node:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node.name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cosmo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("188")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Add custom attributes to the node:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node.attr.rack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" r1\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ----------------------------------- Memory -----------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Lock the memory on startup:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#bootstrap.memory_lock: true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Make sure that the heap size is set to about half the memory available")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# on the system and that the owner of the process is allowed to use this")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# limit.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Elasticsearch performs poorly when the system is swapping the memory.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ----------------------------------- Paths ------------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Path to directory where to store the data (separate multiple locations by comma):")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path.data")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /opt/data/es/data\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Path to log files:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path.logs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /opt/data/es/logs\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ----------------------------------- Memory -----------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Lock the memory on startup:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#bootstrap.memory_lock: true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Make sure that the heap size is set to about half the memory available")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# on the system and that the owner of the process is allowed to use this")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# limit.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Elasticsearch performs poorly when the system is swapping the memory.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------- Network -----------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set the bind address to a specific IP (IPv4 or IPv6):")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("network.host")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 192.168.0.188\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set a custom port for HTTP:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("http.port")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9200")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For more information, consult the network module documentation.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# --------------------------------- Discovery ----------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Pass an initial list of hosts to perform discovery when new node is started:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# The default list of hosts is ["127.0.0.1", "[::1]"]')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#discovery.zen.ping.unicast.hosts: ["192.168.0.188", "192.168.0.189", "192.168.0.190"]')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Prevent the "split brain" by configuring the majority of nodes (total number of master-eligible nodes / 2 + 1):')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#discovery.zen.minimum_master_nodes:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For more information, consult the zen discovery module documentation.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------- Gateway -----------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Block initial recovery after a full cluster restart until N nodes are started:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#gateway.recover_after_nodes: 3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For more information, consult the gateway module documentation.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ---------------------------------- Various -----------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Require explicit names when deleting indices:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#action.destructive_requires_name: true")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-powershell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-powershell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ERROR: max file descriptors [4096] for elasticsearch process likely too low, increase to at least [65536]")]),t._v("\nvi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("security"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("limits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加如下内容:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" soft nofile 65536\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" hard nofile 131072\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" soft nproc 2048\n\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" hard nproc 4096\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ERROR:max number of threads [2048] for user [lish] likely too low, increase to at least [4096]")]),t._v("\nvi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("security"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("limits"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("d"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("90"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("nproc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改如下内容：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" soft nproc 1024\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改为")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" soft nproc 4096\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ERROR:max virtual memory areas vm.max_map_count [65530] likely too low, increase to at least [262144]")]),t._v("\n\nvi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("etc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("sysctl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("conf \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加下面配置：")]),t._v("\nvm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("max_map_count=655360\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 并执行命令：")]),t._v("\nsysctl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行","aria-hidden":"true"}},[this._v("#")]),this._v(" 运行")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装Java环境（一般服务器自带openjdk需先卸载，openjdk和oracle jdk有何区别自行百度）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /opt/elasticsearch-6.5.4/bin/elasticsearch")]),t._v("\nwhich: no java "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ncould not "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" JAVA_HOME or ensure java is "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" PATH\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# java -version")]),t._v("\n-bash: java: 未找到命令\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看JDK版本")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# java -version")]),t._v("\n-bash: java: 未找到命令\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看包含java字符串的文件，其中删除类似下面这四个文件（不一定是四个）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# rpm -qa | grep java")]),t._v("\njava-1.7.0-openjdk-1.7.0.111-2.6.7.8.el7.x86_64\njava-1.8.0-openjdk-1.8.0.102-4.b14.el7.x86_64\njava-1.8.0-openjdk-headless-1.8.0.102-4.b14.el7.x86_64\njava-1.7.0-openjdk-headless-1.7.0.111-2.6.7.8.el7.x86_64\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 包含noarch的文件不必删除，如下：")]),t._v("\npython-javapackages-3.4.1-11.el7.noarch\ntzdata-java-2016g-2.el7.noarch\njavapackages-tools-3.4.1-11.el7.noarch\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查询出来带openjdk的全部使用下面的命令卸载")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yum -y remove java java-x.x.x-gcj-compat-x.x.x.x-xxjpp.xxx")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 packages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yum -y remove java java-x.x.x-openjdk-x.x.x.x-x.x.bxx.exx")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 文件最后添加如下内容")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi /etc/profile")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("export")]),t._v(" JAVA_HOME"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/jdk1.8.0_191\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("export")]),t._v(" CLASSPATH"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(".:"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/jre/lib/rt.jar:"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/dt.jar:"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/lib/tools.jar\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("export")]),t._v(" PATH"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$PATH")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$JAVA_HOME")]),t._v("/bin\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生效环境变量")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# source /etc/profile")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 检查是否配置成功")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0188 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# java -version")]),t._v("\njava version "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.8.0_191"')]),t._v("\nJava"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" SE Runtime Environment "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("build 1.8.0_191-b12"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nJava HotSpot"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("TM"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 64-Bit Server VM "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("build 25.191-b12, mixed mode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到es用户然后运行下面的命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接运行会打印log日志在控制台，关闭服务即刻关闭")]),t._v("\n$ /opt/elasticsearch-6.5.4/bin/elasticsearch\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 加-d参数后台启动")]),t._v("\n$ /opt/elasticsearch-6.5.4/bin/elasticsearch -d\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"访问"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#访问","aria-hidden":"true"}},[this._v("#")]),this._v(" 访问")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("http://192.168.0.188:9200/")]),this._v("返回如下内容表示安装成功")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cosmo-node-188"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cluster_name"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cosmo-efk"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cluster_uuid"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"UgyoS_kMQjKJCxsVUmh-Rw"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"number"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6.5.4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_flavor"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_type"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_hash"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"d2ef93d"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_date"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2018-12-17T21:17:40.758843Z"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build_snapshot"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lucene_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"7.5.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minimum_wire_compatibility_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5.6.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minimum_index_compatibility_version"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5.0.0"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tagline"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"You Know, for Search"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"kibana"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kibana","aria-hidden":"true"}},[this._v("#")]),this._v(" Kibana")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"解压-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-powershell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-powershell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token namespace"}},[this._v("[root@vm-centos75-0189 opt]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# tar zxvf kibana-6.5.4-linux-x86_64.tar.gz -C /opt")]),this._v("\n"),e("span",{pre:!0,attrs:{class:"token namespace"}},[this._v("[root@vm-centos75-0189 opt]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# mv /opt/kibana-6.5.4-linux-x86_64 /opt/kibana")]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"配置-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0189 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi kibana/config/kibana.yml ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kibana is served by a back end server. This setting specifies the port to use.")]),t._v("\nserver.port: 5601\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Specifies the address to which the Kibana server will bind. IP addresses and host names are both valid values.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The default is 'localhost', which usually means remote machines will not be able to connect.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# To allow connections from remote users, set this parameter to a non-loopback address.")]),t._v("\nserver.host: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.0.189"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Enables you to specify a path to mount Kibana at if you are running behind a proxy.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Use the `server.rewriteBasePath` setting to tell Kibana if it should remove the basePath")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# from requests it receives, and to prevent a deprecation warning at startup.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This setting cannot end in a slash.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#server.basePath: ""')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Specifies whether Kibana should rewrite requests that are prefixed with")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `server.basePath` or require that they are rewritten by your reverse proxy.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This setting was effectively always `false` before Kibana 6.3 and will")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default to `true` starting in Kibana 7.0.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#server.rewriteBasePath: false")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The maximum payload size in bytes for incoming server requests.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#server.maxPayloadBytes: 1048576")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The Kibana server's name.  This is used for display purposes.")]),t._v("\nserver.name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cosmo-kibana-189"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The URL of the Elasticsearch instance to use for all your queries.")]),t._v("\nelasticsearch.url: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://192.168.0.188:9200"')]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 直接启动")]),this._v("\n$ /opt/kibana/bin/kibana\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 后台启动")]),this._v("\n$ /opt/kibana/bin/kibana -d\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 浏览器访问下面地址")]),this._v("\nhttp://192.168.0.189:5601\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"kafka"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kafka","aria-hidden":"true"}},[this._v("#")]),this._v(" Kafka")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"解压-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("tar -zxvf kafka_2.11-1.0.0.tgz\nmv kafka_2.11-1.0.0 kafka\ntar -zxvf zookeeper-3.4.13.tar.gz -C /opt\nmv zookeeper-3.4.13 zookeeper\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"配置zookeeper-集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置zookeeper-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置Zookeeper 集群")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cd")]),t._v(" /opt/zookeeper/conf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" zoo_sample.cfg zoo.cfg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" zoo.cfg\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" zoo.cfg\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of milliseconds of each tick")]),t._v("\ntickTime"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("2000\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of ticks that the initial ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# synchronization phase can take")]),t._v("\ninitLimit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("10\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of ticks that can pass between ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sending a request and getting an acknowledgement")]),t._v("\nsyncLimit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("5\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the directory where the snapshot is stored.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# do not use /tmp for storage, /tmp here is just ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# example sakes.")]),t._v("\ndataDir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/data/zookeeper/data\ndataLogDir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/data/zookeeper/logs\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the port at which the clients will connect")]),t._v("\nclientPort"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("2181\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the maximum number of client connections.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# increase this if you need to handle more clients")]),t._v("\nmaxClientCnxns"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("60\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Be sure to read the maintenance section of the ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# administrator guide before turning on autopurge.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of snapshots to retain in dataDir")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#autopurge.snapRetainCount=3")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Purge task interval in hours")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Set to "0" to disable auto purge feature')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#autopurge.purgeInterval=1")]),t._v("\nserver.1"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("192.168.0.188:2888:3888\nserver.2"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("192.168.0.189:2888:3888\nserver.3"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("192.168.0.191:2888:3888\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /opt/data/zookeeper/data/myid         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 192.168.0.188")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /opt/data/zookeeper/data/myid         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 192.168.0.189")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /opt/data/zookeeper/data/myid         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 192.168.0.191")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"启动-zookeeper-集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-zookeeper-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动 Zookeeper 集群")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[this._v("$ ./zkServer.sh -start        "),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 启动")]),this._v("\n$ ./zkServer.sh -stop         "),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 停止")]),this._v("\n$ ./zkServer.sh -status       "),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 状态")]),this._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"配置-kafka-集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-kafka-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 Kafka 集群")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /opt/kafka/config/server.properties\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Licensed to the Apache Software Foundation (ASF) under one or more")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# contributor license agreements.  See the NOTICE file distributed with")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# this work for additional information regarding copyright ownership.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The ASF licenses this file to You under the Apache License, Version 2.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# (the "License"); you may not use this file except in compliance with')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the License.  You may obtain a copy of the License at")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    http://www.apache.org/licenses/LICENSE-2.0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Unless required by applicable law or agreed to in writing, software")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# distributed under the License is distributed on an "AS IS" BASIS,')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# See the License for the specific language governing permissions and")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# limitations under the License.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# see kafka.server.KafkaConfig for additional details and defaults")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################# Server Basics #############################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The id of the broker. This must be set to a unique integer for each broker.")]),t._v("\nbroker.id"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("188\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################# Socket Server Settings #############################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The address the socket server listens on. It will get the value returned from ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# java.net.InetAddress.getCanonicalHostName() if not configured.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   FORMAT:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     listeners = listener_name://host_name:port")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   EXAMPLE:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     listeners = PLAINTEXT://your.host.name:9092")]),t._v("\nlisteners"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PLAINTEXT://192.168.0.188:9092\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Hostname and port the broker will advertise to producers and consumers. If not set, ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# it uses the value for "listeners" if configured.  Otherwise, it will use the value')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# returned from java.net.InetAddress.getCanonicalHostName().")]),t._v("\nadvertised.listeners"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("PLAINTEXT://192.168.0.188:9092\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Maps listener names to security protocols, the default is for them to be the same. See the config documentation for more details")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#listener.security.protocol.map=PLAINTEXT:PLAINTEXT,SSL:SSL,SASL_PLAINTEXT:SASL_PLAINTEXT,SASL_SSL:SASL_SSL")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of threads that the server uses for receiving requests from the network and sending responses to the network")]),t._v("\nnum.network.threads"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("8\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of threads that the server uses for processing requests, which may include disk I/O")]),t._v("\nnum.io.threads"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("8\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The send buffer (SO_SNDBUF) used by the socket server")]),t._v("\nsocket.send.buffer.bytes"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("102400\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The receive buffer (SO_RCVBUF) used by the socket server")]),t._v("\nsocket.receive.buffer.bytes"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("102400\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The maximum size of a request that the socket server will accept (protection against OOM)")]),t._v("\nsocket.request.max.bytes"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("104857600\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################# Log Basics #############################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# A comma separated list of directories under which to store log files")]),t._v("\nlog.dirs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/data/kafka/logs\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The default number of log partitions per topic. More partitions allow greater")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# parallelism for consumption, but this will also result in more files across")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the brokers.")]),t._v("\nnum.partitions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("3\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of threads per data directory to be used for log recovery at startup and flushing at shutdown.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This value is recommended to be increased for installations with data dirs located in RAID array.")]),t._v("\nnum.recovery.threads.per.data.dir"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################# Internal Topic Settings  #############################")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# The replication factor for the group metadata internal topics "__consumer_offsets" and "__transaction_state"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For anything other than development testing, a value greater than 1 is recommended for to ensure availability such as 3.")]),t._v("\noffsets.topic.replication.factor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("1\ntransaction.state.log.replication.factor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("1\ntransaction.state.log.min.isr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################# Log Flush Policy #############################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Messages are immediately written to the filesystem but by default we only fsync() to sync")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the OS cache lazily. The following configurations control the flush of data to disk.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# There are a few important trade-offs here:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    1. Durability: Unflushed data may be lost if you are not using replication.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    2. Latency: Very large flush intervals may lead to latency spikes when the flush does occur as there will be a lot of data to flush.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#    3. Throughput: The flush is generally the most expensive operation, and a small flush interval may lead to excessive seeks.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The settings below allow one to configure the flush policy to flush data after a period of time or")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# every N messages (or both). This can be done globally and overridden on a per-topic basis.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of messages to accept before forcing a flush of data to disk")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log.flush.interval.messages=10000")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The maximum amount of time a message can sit in a log before we force a flush")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log.flush.interval.ms=1000")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################# Log Retention Policy #############################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The following configurations control the disposal of log segments. The policy can")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# be set to delete segments after a period of time, or after a given size has accumulated.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# A segment will be deleted whenever *either* of these criteria are met. Deletion always happens")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# from the end of the log.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The minimum age of a log file to be eligible for deletion due to age")]),t._v("\nlog.retention.hours"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("168\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# A size-based retention policy for logs. Segments are pruned from the log unless the remaining")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# segments drop below log.retention.bytes. Functions independently of log.retention.hours.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#log.retention.bytes=1073741824")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The maximum size of a log segment file. When this size is reached a new log segment will be created.")]),t._v("\nlog.segment.bytes"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("1073741824\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The interval at which log segments are checked to see if they can be deleted according")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# to the retention policies")]),t._v("\nlog.retention.check.interval.ms"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("300000\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################# Zookeeper #############################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Zookeeper connection string (see zookeeper docs for details).")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This is a comma separated host:port pairs, each corresponding to a zk")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# server. e.g. "127.0.0.1:3000,127.0.0.1:3001,127.0.0.1:3002".')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# You can also append an optional chroot string to the urls to specify the")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# root directory for all kafka znodes.")]),t._v("\nzookeeper.connect"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("192.168.0.188:2181,192.168.0.189:2181,192.168.0.191:2181\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Timeout in ms for connecting to zookeeper")]),t._v("\nzookeeper.connection.timeout.ms"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("6000\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("############################# Group Coordinator Settings #############################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The following configuration specifies the time, in milliseconds, that the GroupCoordinator will delay the initial consumer rebalance.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The rebalance will be further delayed by the value of group.initial.rebalance.delay.ms as new members join the group, up to a maximum of max.poll.interval.ms.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The default value for this is 3 seconds.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# We override this to 0 here as it makes for a better out-of-the-box experience for development and testing.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# However, in production environments the default value of 3 seconds is more suitable as this will help to avoid unnecessary, and potentially expensive, rebalances during application startup.")]),t._v("\ngroup.initial.rebalance.delay.ms"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("0\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"启动-kafka-集群"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-kafka-集群","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动 Kafka 集群")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 启动")]),this._v("\n$ /opt/kafka/bin/kafka-server-start.sh -daemon /opt/kafka/config/server.properties\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[this._v("# 查看 topic 是否创建成功")]),this._v("\n$ /opt/kafka/bin/kafka-topics.sh --list --zookeeper 192.168.0.188:2181\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"logstash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#logstash","aria-hidden":"true"}},[this._v("#")]),this._v(" Logstash")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"解压-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压-4","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar zxvf logstash-6.5.4.tar.gz -C /opt")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mv /opt/logstash-6.5.4 /opt/logstash")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"配置-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /opt/logstash/config")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cp logstash-sample.conf logstash.conf")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi logstash.conf ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat logstash.conf ")]),t._v("\ninput "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  kafka "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    bootstrap_servers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.0.188:9092"')]),t._v("\n    topics "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"idp-bpm"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#topics_pattern => "^idp\\\\-.*"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\noutput "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  elasticsearch "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    hosts "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://192.168.0.188:9200"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"idp-%{+YYYY.MM.dd}"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#user => "elastic"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#password => "changeme"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"启动-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接启动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./logstash -f ../config/logstash.conf")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 后台启动")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 bin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /opt/logstash/")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 logstash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nohup bin/logstash -f config/logstash.conf --config.reload.automatic >& /opt/data/logstash/logs/logstash &")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"filebeat"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#filebeat","aria-hidden":"true"}},[this._v("#")]),this._v(" FileBeat")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"解压-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解压-5","aria-hidden":"true"}},[this._v("#")]),this._v(" 解压")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar zxvf filebeat-6.5.4-linux-x86_64.tar.gz -C /opt")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@vm-centos75-0191 opt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mv /opt/filebeat-6.5.4-linux-x86_64 /opt/filebeat")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"配置-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-4","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("vi /opt/filebeat/filebeat.yml")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("###################### Filebeat Configuration Example #########################")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This file is an example configuration file highlighting only the most common")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# options. The filebeat.reference.yml file from the same directory contains all the")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# supported options with more comments. You can use it as a reference.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# You can find the full configuration reference here:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# https://www.elastic.co/guide/en/beats/filebeat/index.html")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For more available modules and options, please see the filebeat.reference.yml sample")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# configuration file.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#=========================== Filebeat inputs =============================")]),t._v("\n\nfilebeat.inputs:\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Each - is an input. Most options can be set at the input level, so")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# you can use different inputs for various configurations.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Below are the input specific configurations.")]),t._v("\n\n- type: log\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change to true to enable this input configuration.")]),t._v("\n  enabled: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Paths that should be crawled and fetched. Glob based paths.")]),t._v("\n  paths:\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#- /var/log/*.log")]),t._v("\n    - E:\\idp\\logs\\bpm\\bpm.log\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Exclude lines. A list of regular expressions to match. It drops the lines that are")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# matching any regular expression from the list.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#exclude_lines: ['^DBG']")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Include lines. A list of regular expressions to match. It exports the lines that are")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# matching any regular expression from the list.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#include_lines: ['^ERR', '^WARN']")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Exclude files. A list of regular expressions to match. Filebeat drops the files that")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# are matching any regular expression from the list. By default, no files are dropped.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#exclude_files: ['.gz$']")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optional additional fields. These fields can be freely picked")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# to add additional information to the crawled log files for filtering")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fields:")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  level: debug")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  review: 1")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("### Multiline options")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Multiline can be used for log messages spanning multiple lines. This is common")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# for Java Stack Traces or C-Line Continuation")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The regexp Pattern that has to be matched. The example pattern matches all lines starting with [")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#multiline.pattern: ^\\[")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Defines if the pattern set under pattern should be negated or not. Default is false.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#multiline.negate: false")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Match can be set to "after" or "before". It is used to define if lines should be append to a pattern')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# that was (not) matched before or after or as long as a pattern is not matched based on negate.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Note: After is the equivalent to previous and before is the equivalent to to next in Logstash")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#multiline.match: after")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#============================= Filebeat modules ===============================")]),t._v("\n\nfilebeat.config.modules:\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Glob pattern for configuration loading")]),t._v("\n  path: "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${path.config}")]),t._v("/modules.d/*.yml\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set to true to enable config reloading")]),t._v("\n  reload.enabled: "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Period on which files under path should be checked for changes")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#reload.period: 10s")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==================== Elasticsearch template setting ==========================")]),t._v("\n\nsetup.template.settings:\n  index.number_of_shards: 3\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#index.codec: best_compression")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#_source.enabled: false")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#================================ General =====================================")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The name of the shipper that publishes the network data. It can be used to group")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# all the transactions sent by a single shipper in the web interface.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#name:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The tags of the shipper are included in their own field with each")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# transaction published.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#tags: ["service-X", "web-tier"]')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optional fields that you can specify to add additional information to the")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# output.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fields:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  env: staging")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#============================== Dashboards =====================================")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# These settings control loading the sample dashboards to the Kibana index. Loading")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the dashboards is disabled by default and can be enabled either by setting the")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# options here, or by using the `-setup` CLI flag or the `setup` command.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#setup.dashboards.enabled: false")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The URL from where to download the dashboards archive. By default this URL")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# has a value which is computed based on the Beat name and version. For released")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# versions, this URL points to the dashboard archive on the artifacts.elastic.co")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# website.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#setup.dashboards.url:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#============================== Kibana =====================================")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Starting with Beats version 6.0.0, the dashboards are loaded via the Kibana API.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This requires a Kibana endpoint configuration.")]),t._v("\nsetup.kibana:\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kibana Host")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Scheme and port can be left out and will be set to the default (http and 5601)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# In case you specify and additional path, the scheme is required: http://localhost:5601/path")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# IPv6 addresses should always be defined as: https://[2001:db8::1]:5601")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#host: "localhost:5601"')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kibana Space ID")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ID of the Kibana Space into which the dashboards should be loaded. By default,")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the Default Space will be used.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#space.id:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#============================= Elastic Cloud ==================================")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# These settings simplify using filebeat with the Elastic Cloud (https://cloud.elastic.co/).")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The cloud.id setting overwrites the `output.elasticsearch.hosts` and")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `setup.kibana.host` options.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# You can find the `cloud.id` in the Elastic Cloud web UI.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#cloud.id:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The cloud.auth setting overwrites the `output.elasticsearch.username` and")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `output.elasticsearch.password` settings. The format is `<user>:<pass>`.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#cloud.auth:")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#================================ Outputs =====================================")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Configure what output to use when sending the data collected by the beat.")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#------------------------------ Kafka output ----------------------------------")]),t._v("\noutput.kafka:   \n  hosts: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.0.188:9092"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  topic: idp-bpm\n  required_acks: 1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#-------------------------- Elasticsearch output ------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#output.elasticsearch:")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Array of hosts to connect to.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#hosts: ["localhost:9200"]')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optional protocol and basic auth credentials.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#protocol: "https"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#username: "elastic"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#password: "changeme"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#----------------------------- Logstash output --------------------------------")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#output.logstash:")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The Logstash hosts")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#hosts: ["localhost:5044"]')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Optional SSL. By default is off.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# List of root certificates for HTTPS server verifications")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#ssl.certificate_authorities: ["/etc/pki/root/ca.pem"]')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Certificate for SSL client authentication")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#ssl.certificate: "/etc/pki/client/cert.pem"')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Client Certificate Key")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#ssl.key: "/etc/pki/client/cert.key"')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#================================ Procesors =====================================")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Configure processors to enhance or manipulate events generated by the beat.")]),t._v("\n\nprocessors:\n  - add_host_metadata: ~\n  - add_cloud_metadata: ~\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#================================ Logging =====================================")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Sets log level. The default log level is info.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Available log levels are: error, warning, info, debug")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#logging.level: debug")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# At debug level, you can selectively enable logging only for some components.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# To enable all selectors use ["*"]. Examples of other selectors are "beat",')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "publish", "service".')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#logging.selectors: ["*"]')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#============================== Xpack Monitoring ===============================")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# filebeat can export internal metrics to a central Elasticsearch monitoring")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cluster.  This requires xpack monitoring to be enabled in Elasticsearch.  The")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# reporting is disabled by default.")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Set to true to enable the monitoring reporter.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#xpack.monitoring.enabled: false")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Uncomment to send the metrics to Elasticsearch. Most settings from the")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Elasticsearch output are accepted here as well. Any setting that is not set is")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# automatically inherited from the Elasticsearch output configuration, so if you")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# have the Elasticsearch output configured, you can simply uncomment the")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# following line.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#xpack.monitoring.elasticsearch:")]),t._v("\n\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"启动-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化","aria-hidden":"true"}},[this._v("#")]),this._v(" 优化")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("所有组件作为服务启动")]),t._v(" "),s("li",[t._v("所有组件集群一键启动、停止、查看状态")]),t._v(" "),s("li",[t._v("所有组件监控插件、第三方程序的研究")]),t._v(" "),s("li",[t._v("所有组件一键安装配置的研究")]),t._v(" "),s("li",[t._v("所有组件安全设置的研究")]),t._v(" "),s("li",[t._v("所有组件高级设置的研究")]),t._v(" "),s("li",[t._v("Logstash 输入、输出、过滤以及消费kafka topic正则表达式设置的研究")]),t._v(" "),s("li",[t._v("Kibana 图表、仪表、各项目指标归纳设置的研究")]),t._v(" "),s("li",[t._v("用户足迹、业务日志、系统日志分类等归纳设置的研究")])])}],!1,null,null,null);e.default=n.exports}}]);