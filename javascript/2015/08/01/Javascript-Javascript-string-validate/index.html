<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Javascript — 字符串验证 &middot; 尹枭凌
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/naringu.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/form.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="./public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  <link rel="alternate" type="application/rss+xml" title="Mozilla RSS" href="feed.category.xml">
  </head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48740529-1', 'auto');
  ga('send', 'pageview');

</script>


<body class="theme-6dd">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
      <img width="200" height="180" alt="A photo of ariestiyansyah" src="/images/head.jpeg">
    <p align="center">If I know what love is, <br />it is because of you.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">首页</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">关于我</a>
        
      
    
      
    
      
        
          <a class="sidebar-nav-item" href="/categories/">分类</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/contact/">联系方式</a>
        
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    

    <a class="sidebar-nav-item" href="https://github.com/yinxiaoling">GitHub project</a>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2015. All rights reserved.
    </p>
  </div>
</div>


    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">尹枭凌</a>
            <small>—因为有了因为，所以有了所以，既然已成既然，何必再问何必。</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Javascript — 字符串验证</h1>
  <span class="post-date">01 Aug 2015</span>
  <pre><code>
/*
 * 用途：检查输入字符串是否为空或者全部都是空格
 * 输入：str
 * 返回： 如果全是空返回true,否则返回false
 */
function isNull(str) {
    if (str == "")
        return true;
    var regu = "^[ ]+$";
    var re = new RegExp(regu);
    return re.test(str);
}
</code></pre>

<pre><code>
/*
 * 用途：检查输入对象的值是否符合整数格式
 * 输入：str 输入的字符串
 * 返回：如果通过验证返回true,否则返回false
 */
function isInteger(str) {
    var regu = /^[-]{0,1}[0-9]{1,}$/;
    return regu.test(str);
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入手机号码是否正确
 * 输入： s：字符串 
 * 返回： 如果通过验证返回true,否则返回false
 */
function checkMobile(s) {
//    var regu = /^[1][3][0-9]{9}$/;
    var regu = /^(?:1[2,3,5,8,9]|20)\d{9}$/;
    var re = new RegExp(regu);
    if (re.test(s)) {
        return true;
    } else {
        return false;
    }
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入字符串是否符合正整数格式
 * 输入： s：字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function isNumber(s) {
    var regu = "^[0-9]+$";
    var re = new RegExp(regu);
    if (s.search(re) != -1) {
        return true;
    } else {
        return false;
    }
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入字符串是否是带小数的数字格式,可以是负数
 * 输入： s：字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function isDecimal(str) {
    if (isInteger(str))
        return true;
    var re = /^[-]{0,1}(\d+)[\.]+(\d+)$/;
    if (re.test(str)) {
        if (RegExp.$1 == 0 && RegExp.$2 == 0)
            return false;
        return true;
    } else {
        return false;
    }
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入对象的值是否符合端口号格式
 * 输入：str 输入的字符串
 * 返回：如果通过验证返回true,否则返回false
 */
function isPort(str) {
    return (isNumber(str) && str < 65536);
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入对象的值是否符合E-Mail格式
 * 输入：str 输入的字符串
 * 返回：如果通过验证返回true,否则返回false
 */
function isEmail(str) {
    var myReg = /^[-_A-Za-z0-9]+@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/;
    if (myReg.test(str))
        return true;
    return false;
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入字符串是否符合金额格式 格式定义为带小数的正数，小数点后最多三位
 * 输入： s：字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function isMoney(s) {
    var regu = "^[0-9]+[\.][0-9]{0,3}$";
    var re = new RegExp(regu);
    if (re.test(s)) {
        return true;
    } else {
        return false;
    }
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入字符串是否只由英文字母和数字和下划线组成
 * 输入： s：字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function isNumberOr_Letter(s) {// 判断是否是数字或字母

    var regu = "^[0-9a-zA-Z\_]+$";
    var re = new RegExp(regu);
    if (re.test(s)) {
        return true;
    } else {
        return false;
    }
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入字符串是否只由英文字母和数字组成
 * 输入： s：字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function isNumberOrLetter(s) {// 判断是否是数字或字母

    var regu = "^[0-9a-zA-Z]+$";
    var re = new RegExp(regu);
    if (re.test(s)) {
        return true;
    } else {
        return false;
    }
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入字符串是否只由汉字、字母、数字组成
 * 输入： value：字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function isChinaOrNumbOrLett(s) {// 判断是否是汉字、字母、数字组成

    var regu = "^[0-9a-zA-Z\u4e00-\u9fa5]+$";
    var re = new RegExp(regu);
    if (re.test(s)) {
        return true;
    } else {
        return false;
    }
}

</code></pre>

<pre><code>
/*
 * 用途：判断是否是日期
 * 输入：date：日期；fmt：日期格式
 * 返回：如果通过验证返回true,否则返回false
 */
function isDate(date, fmt) {
    if (fmt == null)
        fmt = "yyyyMMdd";

    var yIndex = fmt.indexOf("yyyy");
    if (yIndex == -1)
        return false;

    var year = date.substring(yIndex, yIndex + 4);
    var mIndex = fmt.indexOf("MM");
    if (mIndex == -1)
        return false;

    var month = date.substring(mIndex, mIndex + 2);
    var dIndex = fmt.indexOf("dd");
    if (dIndex == -1)
        return false;

    var day = date.substring(dIndex, dIndex + 2);

    if (!isNumber(year) || year > "2100" || year < "1900")
        return false;

    if (!isNumber(month) || month > "12" || month < "01")
        return false;

    if (day > getMaxDay(year, month) || day < "01")
        return false;

    return true;
}

</code></pre>

<pre><code>
function getMaxDay(year, month) {
    if (month == 4 || month == 6 || month == 9 || month == 11)
        return "30";
    if (month == 2)
        if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0)
            return "29";
        else
            return "28";
    return "31";
}

</code></pre>

<pre><code>
/*
 * 用途：字符1是否以字符串2结束
 * 输入：str1：字符串；str2：被包含的字符串
 * 返回：如果通过验证返回true,否则返回false
 */
function isLastMatch(str1, str2) {
    var index = str1.lastIndexOf(str2);
    if (str1.length == index + str2.length)
        return true;
    return false;
}

</code></pre>

<pre><code>
/*
 * 用途：字符1是否以字符串2开始
 * 输入：str1：字符串；str2：被包含的字符串
 * 返回：如果通过验证返回true,否则返回false
 */
function isFirstMatch(str1, str2) {
    var index = str1.indexOf(str2);
    if (index == 0)
        return true;
    return false;
}

</code></pre>

<pre><code>
/*
 * 用途：字符1是包含字符串2
 * 输入：str1：字符串；str2：被包含的字符串
 * 返回：如果通过验证返回true,否则返回false
 */
function isMatch(str1, str2) {
    var index = str1.indexOf(str2);
    if (index == -1)
        return false;
    return true;
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入的起止日期是否正确，规则为两个日期的格式正确， 且结束如期>=起始日期
 * 输入： startDate：起始日期，字符串 endDate：结束如期，字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function checkTwoDate(startDate, endDate) {
    if (!isDate(startDate)) {
        alert("起始日期不正确!");
        return false;
    } else if (!isDate(endDate)) {
        alert("终止日期不正确!");
        return false;
    } else if (startDate > endDate) {
        alert("起始日期不能大于终止日期!");
        return false;
    }
    return true;
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入的Email信箱格式是否正确
 * 输入： strEmail：字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function checkEmail(strEmail) {
    // var emailReg = /^[_a-z0-9]+@([_a-z0-9]+\.)+[a-z0-9]{2,3}$/;
    var emailReg = /^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;
    if (emailReg.test(strEmail)) {
        return true;
    } else {
        alert("您输入的Email地址格式不正确！");
        return false;
    }
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入的电话号码格式是否正确
 * 输入： strPhone：字符串
 * 返回： 如果通过验证返回true,否则返回false
 */
function checkPhone(strPhone) {
    var phoneRegWithArea = /^[0][1-9]{2,3}-[0-9]{5,10}$/;
    var phoneRegNoArea = /^[1-9]{1}[0-9]{5,8}$/;
    var prompt = "您输入的电话号码不正确!"
    if (strPhone.length > 9) {
        if (phoneRegWithArea.test(strPhone)) {
            return true;
        } else {
            alert(prompt);
            return false;
        }
    } else {
        if (phoneRegNoArea.test(strPhone)) {
            return true;
        } else {
            alert(prompt);
            return false;
        }

    }
}

</code></pre>

<pre><code>
/*
 * 用途：检查复选框被选中的数目 
 * 输入： checkboxID：字符串 
 * 返回： 返回该复选框中被选中的数目
 */
function checkSelect(checkboxID) {
    var check = 0;
    var i = 0;
    if (document.all(checkboxID).length > 0) {
        for (i = 0; i < document.all(checkboxID).length; i++) {
            if (document.all(checkboxID).item(i).checked) {
                check += 1;
            }

        }
    } else {
        if (document.all(checkboxID).checked)
            check = 1;
    }
    return check;
}

</code></pre>

<pre><code>
function getTotalBytes(varField) {
    if (varField == null)
        return -1;

    var totalCount = 0;
    for (i = 0; i < varField.value.length; i++) {
        if (varField.value.charCodeAt(i) > 127)
            totalCount += 2;
        else
            totalCount++;
    }
    return totalCount;
}

</code></pre>

<pre><code>
function selectAll(checkboxID, status) {

    if (document.all(checkboxID) == null)
        return;

    if (document.all(checkboxID).length > 0) {
        for (i = 0; i < document.all(checkboxID).length; i++) {

            document.all(checkboxID).item(i).checked = status;
        }
    } else {
        document.all(checkboxID).checked = status;
    }
}

</code></pre>

<pre><code>
function selectInverse(checkboxID) {
    if (document.all(checkboxID) == null)
        return;

    if (document.all(checkboxID).length > 0) {
        for (i = 0; i < document.all(checkboxID).length; i++) {
            document.all(checkboxID).item(i).checked = !document
                    .all(checkboxID).item(i).checked;
        }
    } else {
        document.all(checkboxID).checked = !document.all(checkboxID).checked;
    }
}

</code></pre>

<pre><code>
function checkDate(value) {
    if (value == '')
        return true;
    if (value.length != 8 || !isNumber(value))
        return false;
    var year = value.substring(0, 4);
    if (year > "2100" || year < "1900")
        return false;

    var month = value.substring(4, 6);
    if (month > "12" || month < "01")
        return false;

    var day = value.substring(6, 8);
    if (day > getMaxDay(year, month) || day < "01")
        return false;

    return true;
}

</code></pre>

<pre><code>
/*
 * 用途：检查输入的起止日期是否正确，规则为两个日期的格式正确或都为空且结束日期>=起始日期
 * 输入： startDate：起始日期，字符串 endDate：结束日期，字符串 
 * 返回： 如果通过验证返回true,否则返回false
 */
function checkPeriod(startDate, endDate) {
    if (!checkDate(startDate)) {
        alert("起始日期不正确!");
        return false;
    } else if (!checkDate(endDate)) {
        alert("终止日期不正确!");
        return false;
    } else if (startDate > endDate) {
        alert("起始日期不能大于终止日期!");
        return false;
    }
    return true;
}

</code></pre>

<pre><code>
/*
 * 用途：检查证券代码是否正确 
 * 输入： secCode:证券代码
 * 返回： 如果通过验证返回true,否则返回false
 */
function checkSecCode(secCode) {
    if (secCode.length != 6) {
        alert("证券代码长度应该为6位");
        return false;
    }

    if (!isNumber(secCode)) {
        alert("证券代码只能包含数字");

        return false;
    }
    return true;
}

</code></pre>

<pre><code>
/*******************************************************************************
 * function:cTrim(sInputString,iType) description:字符串去空格的函数
 * parameters:iType：1=去掉字符串左边的空格
 *
 * 2=去掉字符串左边的空格 0=去掉字符串左边和右边的空格 return value:去掉空格的字符串
 ******************************************************************************/
function cTrim(sInputString, iType) {
    var sTmpStr = ' ';
    var i = -1;

    if (iType == 0 || iType == 1) {
        while (sTmpStr == ' ') {
            ++i;
            sTmpStr = sInputString.substr(i, 1);
        }
        sInputString = sInputString.substring(i);
    }

    if (iType == 0 || iType == 2) {
        sTmpStr = ' ';
        i = sInputString.length;
        while (sTmpStr == ' ') {
            --i;
            sTmpStr = sInputString.substr(i, 1);
        }
        sInputString = sInputString.substring(0, i + 1);
    }
    return sInputString;
}

</code></pre>

<pre><code>
/* 
 * 用途：校验ip地址的格式
 * 输入：strIP：ip地址
 * 返回：如果通过验证返回true,否则返回false；
 */
function isIP(strIP) {
    if (isNull(strIP))
        return false;
    // 匹配IP地址的正则表达式
    var re = /^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;
    if (re.test(strIP)) {
        if (RegExp.$1 < 256 && RegExp.$2 < 256 
            && RegExp.$3 < 256 && RegExp.$4 < 256)
            return true;
    }
    return false;
}

</code></pre>

<pre><code>

function getFirstSelectedIndex(checkboxID) {
    var value = -2;
    var i = 0;
    if (document.all(checkboxID).length > 0) {
        for (i = 0; i < document.all(checkboxID).length; i++) {
            if (document.all(checkboxID).item(i).checked) {
                value = i;
                break;
            }
        }
    } else {
        if (document.all(checkboxID).checked)
            value = -1;
    }
    return value;
}

</code></pre>

<pre><code>

function getFirstSelectedValue(checkboxID) {
    var value = null;
    var i = 0;
    if (document.all(checkboxID).length > 0) {
        for (i = 0; i < document.all(checkboxID).length; i++) {
            if (document.all(checkboxID).item(i).checked) {
                value = document.all(checkboxID).item(i).value;
                break;
            }
        }
    } else {
        if (document.all(checkboxID).checked)
            value = document.all(checkboxID).value;
    }
    return value;
}
</code></pre>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/framework/2015/08/18/Java-Iocxiangjie/">
            Framework — IOC详解
            <small>18 Aug 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/java/2015/08/12/Java-HTTP-hypertext-transfer-protocol/">
            Java — HTTP 协议详解
            <small>12 Aug 2015</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/git/2015/08/06/Git-Git-command/">
            Git — Git常用命令速查表
            <small>06 Aug 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

<div class="comments">
    <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'testnaringu';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'testnaringu';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>
    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>

    <div align="center" class="footer">
        Copyright © 2015 <br>
    </div>
  </body>
</html>

